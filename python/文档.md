# 预测模型**可行性**分析

需要解决的问题

1. 客流检测能力不足
2. 缺乏客流精准管控方法
3. 缺乏对突发客流的提前评估和预测

## 影响因素

### 必须影响因素

1. 进站还是出站
2. 星期几(0, 1, 2, 3, 4, 5, 6)
3. 是否为节假日(1, 2, 3)
4. 时间小时(0, 1, 2,-----, 11, 12,13, ----,16, 17, 18,---, 23, 24)
5. 地铁几号线 ( 1, 2, 3, 4, 5, 10, 11, 12)
6. 地铁站点等级
7. 票价
8. 温度(可选)
9. 天气(可选)

### 可变影响因素

1. 是否存在集体活动等突发可变因素( 应对突发客流的检测 )
2. 是否居于学校, 公园, 等场所附近(可能会影响站点等级划分)
3. 是否与前几天有关联 (RNN)
4. 是否有较大波动 ()
5. 与实际情况有较大误差的应对情况

### 输出值

一个数字 => 预测流量

## 模型选择

* 参数动态可调节(时间, 站点, 路线)
* 具备实时计算能力

### 初步选择普通神经网络做实验

### 1. 卷积神经网络

1. CNN

### 2. 循环神经网络

1. RNN
2. LSTM
3. GRU

# 统计任务

## 1. 单月整体客流波动的分析

#### API


| 计算范围 | 数据格式 |
| - | - |
| 单月整体 | 列表 |
| 单月各条线路 | 字典 |
| 单月各个站点(按线路划分) | 嵌套字典 |

```json
{
    ret:0
    data:{
    	all_flow:[12,34,432,54,7,86,454,432,767],  
        route_flow:{
            1号线:[1,2,45],
            2号线:[44,786]
            },
        sta_flow:{
            1号线:{
            sta1:{1:34,2:43},
            sta2:{6:43,8:234}
            },
            2号线:{
                sta4:{},
                sta5:{}
                },
            }
        },

}
```



#### 详细过程

```python
# 1. 单月整体
pandas直接根据月筛选统计数据
# 3. sta
先统计全部sta的每个月得到:
{
    sta63: {1:12, 2:34},
    sta45: {1:11, 2:53},
    sta127: {1:11, 2:53},
}
# 2. route
直接加和
```

## 2. 工作日和周末的客流分析

| 统计对象 | 统计范围 | 数据结构 |
| -------- | -------- | -------- |
|          |          |          |
|          |          |          |
|          |          |          |



## 3. 但站点客流出/入站分析

## 4. 用户年龄结构分析

## 5. 早晚高峰客流站点分布分析

## 6. 站点OD客流量分析

## 7. 线路断面(按站点)流量分析

## 8. 自愿拓展分析
